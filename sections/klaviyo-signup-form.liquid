<!-- Klaviyo Form Wrapper -->
<div class="klaviyo-form-Whvmr4">
  <!-- Hidden input field for tracking the HVCO page -->
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Store the current page title in a JS variable
    var pageTitle = document.title;

    document.addEventListener('submit', function (event) {
      if (event.target && event.target.classList.contains('klaviyo-form')) {
        setTimeout(function () {
          var emailField = event.target.querySelector("input[type='email']");
          if (emailField && emailField.value) {
            // Send profile update request to Klaviyo API
            fetch('https://a.klaviyo.com/api/identify', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                token: 'RYhhqf',
                properties: {
                  $email: emailField.value,
                  hvco_page: pageTitle, // Now using JS to dynamically get the page title
                },
              }),
            });
          }
        }, 1000); // Wait to ensure form submission is complete
      }
    });
  });
</script>
